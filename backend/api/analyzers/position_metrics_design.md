# 포지션별 전문가급 평가 지표 설계
## 세계적인 감독 수준의 선수 평가 시스템

### 철학
- **무리뉴 (Mourinho)**: 수비 안정성, 전술적 규율, 팀 기여도 중시
- **클롭 (Klopp)**: 강도 높은 압박, 전환 속도, 체력 관리 중시
- **과르디올라 (Guardiola)**: 빌드업 능력, 공간 창출, 패스 정확도 중시

---

## 1. 골키퍼 (GK) - 최후의 보루

### 핵심 역할
- 골문 지키기 (선방)
- 위치 선정 및 장악력
- 빌드업 시작 (발 능력)

### 평가 지표 (가중치)

#### A. 기본 수비 (45%)
1. **선방 능력** (25%)
   - 선방 횟수 (saves)
   - 선방 성공률 = 선방 / 상대 슈팅
   - 빅찬스 선방 (xG > 0.3인 슛 막은 횟수)
   - 클린시트 기여도

2. **공중볼 장악** (10%)
   - 크로스 처리 성공률
   - 코너킥 수비 성공률
   - 공중볼 경합 성공률

3. **위치 선정** (10%)
   - 실점 / 상대 xG 비율 (낮을수록 우수)
   - 1대1 상황 선방률
   - 페널티킥 선방률

#### B. 배급 능력 (25%)
1. **패스 정확도** (15%)
   - 짧은 패스 성공률
   - 긴 패스 성공률
   - 스루패스 시도 및 성공

2. **빌드업 기여** (10%)
   - 패스 시도 횟수 (적극성)
   - 전방 패스 성공률
   - 어시스트 기여

#### C. 안정성 (20%)
1. **실수 최소화** (15%)
   - 핸들링 실수 (0회 = 만점)
   - 패스 미스로 인한 실점 (0회 = 만점)
   - 판단 미스

2. **일관성** (5%)
   - 평점 분산 (낮을수록 우수)
   - 연속 호수비 경기

#### D. 평점 기반 (10%)
- 평균 평점 (spRating)
- 최고 평점
- 6.5 이상 경기 비율

---

## 2. 수비수 (CB, FB, WB) - 방어의 핵심

### 2A. 중앙 수비수 (CB, SW)

#### 평가 지표 (가중치)

##### A. 수비 능력 (50%)
1. **태클 & 볼 차단** (20%)
   - 태클 성공률 (tackle success / tackle try)
   - 볼 차단 (block) 횟수
   - 인터셉트 성공

2. **공중볼 우위** (15%)
   - 공중볼 경합 성공률 (aerial success)
   - 헤딩 클리어 성공
   - 세트피스 수비 기여

3. **수비 안정성** (15%)
   - 파울 / 태클 비율 (낮을수록 우수)
   - 실점 관여도 (낮을수록 우수)
   - 경고/퇴장 최소화

##### B. 빌드업 능력 (25%)
1. **패스 능력** (20%)
   - 패스 성공률 (특히 긴 패스)
   - 전방 패스 성공
   - 패스 시도 횟수 (빌드업 적극성)

2. **전진 패스** (5%)
   - 스루패스 시도 및 성공
   - 어시스트 기여

##### C. 일관성 (15%)
- 평점 분산
- 연속 안정적 경기
- 실수 최소화

##### D. 평점 기반 (10%)
- 평균 평점
- 7.0 이상 경기 비율

### 2B. 풀백 / 윙백 (FB, WB)

#### 평가 지표 (가중치)

##### A. 수비 능력 (35%)
1. **1대1 수비** (15%)
   - 태클 성공률
   - 드리블 저지 성공률

2. **측면 봉쇄** (10%)
   - 측면 크로스 차단
   - 인터셉트

3. **수비 위치 선정** (10%)
   - 실점 관여 최소화
   - 파울 최소화

##### B. 공격 기여 (40%)
1. **크로스 & 찬스 창출** (20%)
   - 크로스 시도 및 성공
   - 어시스트
   - 빅찬스 창출

2. **전진 플레이** (15%)
   - 드리블 성공률
   - 전방 패스 성공
   - 슈팅 기여

3. **오버래핑** (5%)
   - 공격 가담 빈도
   - 최종 1/3 지역 활동

##### C. 체력 & 일관성 (15%)
- 전/후반 활동량 비교
- 평점 일관성

##### D. 평점 기반 (10%)

---

## 3. 미드필더 - 경기의 심장

### 3A. 수비형 미드필더 (CDM, DM)

#### 평가 지표 (가중치)

##### A. 수비 차단 (40%)
1. **볼 탈취** (25%)
   - 태클 성공률
   - 인터셉트 횟수
   - 볼 차단

2. **공중볼 지배** (10%)
   - 공중볼 경합 성공률

3. **압박 강도** (5%)
   - 수비 시도 빈도
   - 파울 대비 효율

##### B. 패스 & 빌드업 (35%)
1. **배급 능력** (25%)
   - 패스 성공률 (85% 이상 우수)
   - 패스 시도 (많을수록 게임 관여도 높음)
   - 후방에서 전방 연결

2. **전환 플레이** (10%)
   - 롱패스 성공
   - 스루패스 시도

##### C. 일관성 & 규율 (15%)
- 평점 분산
- 경고 최소화

##### D. 평점 기반 (10%)

### 3B. 중앙 미드필더 (CM)

#### 평가 지표 (가중치)

##### A. 패스 & 창조력 (40%)
1. **패스 마스터** (25%)
   - 패스 성공률 (80% 이상)
   - 패스 시도 (많을수록 우수)
   - 짧은/긴 패스 밸런스

2. **찬스 창출** (15%)
   - 어시스트
   - 스루패스 성공
   - 빅찬스 창출

##### B. 수비 기여 (25%)
- 태클 성공
- 인터셉트
- 수비 시도

##### C. 공격 기여 (20%)
- 골 기여
- 슈팅 (정확도)
- 최종 1/3 활동

##### D. 일관성 (10%)
- 평점 일관성

##### E. 평점 기반 (5%)

### 3C. 공격형 미드필더 (CAM, AM)

#### 평가 지표 (가중치)

##### A. 창조력 (45%)
1. **어시스트 & 찬스 창출** (30%)
   - 어시스트 (경기당)
   - 빅찬스 창출
   - 스루패스 성공

2. **패스 센스** (15%)
   - 패스 성공률
   - 최종 패스 정확도

##### B. 골 결정력 (30%)
- 골 (경기당)
- 슈팅 전환율
- 골 / xG 비율

##### C. 드리블 & 돌파 (15%)
- 드리블 성공률
- 상대 수비 제치기

##### D. 일관성 (10%)

---

## 4. 공격수 - 골의 사냥꾼

### 4A. 윙어 (W, WF)

#### 평가 지표 (가중치)

##### A. 골 & 찬스 창출 (45%)
1. **득점력** (25%)
   - 골 (경기당)
   - 슈팅 전환율
   - 골 / xG 비율

2. **어시스트** (20%)
   - 어시스트 (경기당)
   - 크로스 성공률
   - 빅찬스 창출

##### B. 드리블 & 돌파 (30%)
- 드리블 성공률 (매우 중요)
- 1대1 돌파 성공
- 상대 수비수 제치기

##### C. 측면 활동 (15%)
- 크로스 시도
- 측면 침투
- 컷백 패스

##### D. 일관성 (10%)

### 4B. 스트라이커 (ST, CF)

#### 평가 지표 (가중치)

##### A. 골 결정력 (55%)
1. **득점 능력** (40%)
   - 골 (경기당) - 최우선 지표
   - 슈팅 전환율
   - 골 / xG 비율 (마무리 능력)
   - 빅찬스 전환율

2. **슈팅 센스** (15%)
   - 슈팅 정확도 (유효슈팅 비율)
   - 박스 안 슈팅 비중
   - 적절한 슈팅 위치 선택

##### B. 연계 플레이 (20%)
- 어시스트
- 포스트 플레이 (패스 연결)
- 공간 창출

##### C. 공중볼 지배 (15%)
- 헤딩 골
- 공중볼 경합 성공률
- 세트피스 득점

##### D. 일관성 (10%)
- 연속 득점 경기
- 평점 일관성

---

## 가중치 철학

### 무리뉴식 (Defensive Solidity)
- 수비수: 수비 능력 60%, 빌드업 25%, 안정성 15%
- 미드필더: 수비 기여 40%, 패스 35%, 공격 15%, 일관성 10%

### 클롭식 (High-Intensity Pressing)
- 전 포지션: 압박 강도, 전환 속도 가중치 +10%
- 체력 지표 중시

### 과르디올라식 (Possession & Build-up)
- 전 포지션: 패스 정확도 가중치 +15%
- GK: 발 능력 가중치 +10%
- CB: 빌드업 가중치 +10%

---

## Nexon API 데이터 매핑

### 선수별 사용 가능 데이터 (raw_data.matchInfo[].player[])

```python
{
  "spId": 선수ID,
  "spPosition": 포지션코드,
  "spGrade": 등급,
  "status": {
    # 골/슈팅
    "shoot": {
      "goalTotal": 골,
      "shootTotal": 총슈팅,
      "effectiveShootTotal": 유효슈팅,
      "shootOutScore": 골대맞춘슈팅
    },

    # 패스
    "pass": {
      "passTry": 패스시도,
      "passSuccess": 패스성공,
      "shortPassTry": 짧은패스시도,
      "shortPassSuccess": 짧은패스성공,
      "longPassTry": 긴패스시도,
      "longPassSuccess": 긴패스성공,
      "throughPassTry": 스루패스시도,
      "throughPassSuccess": 스루패스성공
    },

    # 드리블
    "dribble": {
      "dribbleTry": 드리블시도,
      "dribbleSuccess": 드리블성공
    },

    # 수비
    "defence": {
      "blockTry": 차단시도,
      "block": 차단성공,
      "tackleTry": 태클시도,
      "tackleSuccess": 태클성공
    },

    # 기타
    "aerialSuccess": 공중볼성공,
    "yellowCards": 경고,
    "redCards": 퇴장,
    "spRating": 평점
  }
}
```

이 데이터를 바탕으로 각 포지션별 전문적인 파워스코어를 계산합니다.
